(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{502:function(e,t,i){"use strict";i.r(t),function(e,n){i(282),i(34),i(183),i(119),i(40),i(184);var a=i(600),s=i(901),o=i(544),r=i(13),c=i(216),l=(i(866),i(867),{initWithTextarea:function(t){if(!t.data("ss-initialized")){t.data("ss-initialized",!0),this.loadPlaceholderPlugin();var i=this,s=t.data("height")?t.data("height"):75,o=t.data("width")?t.data("width"):"100%",r=t.attr("id"),c=t.data("ss-rich-enable-images"),d=t.data("ss-rich-enable-media-embeds"),u=t.data("ss-hide-format-options"),p="/assets/css/libs/https/tinymce/skins/skillshare-1",m=SS.serverBootstrap.staticAssetData.cdnHost,h=m?"//"+m+p:p,f=[],b=[];if(!u){f=[["bold","italic","underline"],["bullist","numlist"],["link"]]}c&&b.push("image"),d&&b.push("embed-media-button"),f.push(b);var g=e.compact(e.map(f,function(e){return e.join(" ")})).join(" | ");e.each(a.a.editors,function(e){e.id===r&&e.destroy()}),a.a.init({selector:"#"+r,width:o,height:s,theme:"modern",content_css:h+"/skillshare.content.css",skin:"skillshare",skin_url:h,plugins:"link paste lists placeholder",toolbar:g,valid_elements:"-p[class],a[href|class],strong/b,br,img[src|width|height],ul,ol,li,-em,-strong,-span[style],iframe[!src|height|width]",valid_children:"-a[img],-strong[img],-span[img],-em[img]",font_formats:"",link_title:!1,target_list:!1,menubar:!1,media_alt_source:!1,relative_urls:!1,convert_urls:!1,entity_encoding:"named",browser_spellcheck:!0,init_instance_callback:function(){n(l).trigger("init")},setup:function(s){s.on("KeyDown",e.bind(function(e){var t=e.keyCode,i=n(this.get(this.activeEditor.id).getElement()).attr("maxlength"),a=n(this.get(this.activeEditor.id).getElement()).attr("maxwords");if(i||a){var s=!1,o=!1,r=document.createElement("DIV");r.innerHTML=this.activeEditor.getContent();var c=r.textContent||r.innerText||"";if(i){var l=c.length,d=n("#chars_left");d.length&&d.html(i-l),s=l>i-1}if(a)o=c.replace(/(^\s*)|(\s*$)/gi,"").replace(/[ ]{2,}/gi," ").replace(/\n /,"\n").split(" ").length>a-1;8!==t&&46!==t&&(s||o)&&(e.stopPropagation(),e.preventDefault())}},a.a)),i.setup(s,t)}})}},setup:function(t,i){new s.a({tinymceEditor:t}),t.on("focus",function(){n(t.getContainer()).addClass("focus"),Object(c.a)(i,"focus")}),t.on("change",function(){t.save(),i.trigger("change")}),t.on("blur",function(){t.save(),i.trigger("change"),n(t.getContainer()).removeClass("focus"),Object(c.a)(i,"blur")}),t.on("init",function(){if(i.data("ss-rich-enable-uploads")||i.data("ss-rich-enable-media-embeds")&&r.a.isMobile()){var e=n('<div class="editor-image-uploader"><a href="javascript:;" class="editor-image-uploader-btn">+ Upload photo</a></div>');i.before(e),o.a.initBasicFineUploader({button:e.find(".editor-image-uploader-btn").get(0),inputName:i.attr("data-ss-upload-type")+"[embedded_image]",request:{params:{type:i.attr("data-ss-upload-type"),data:i.attr("data-ss-upload-data")}},callbacks:{onComplete:function(e,i,a){var s=t.getDoc().createElement("p"),o=t.getDoc().createElement("img");o.src=a.fileLocations,n(s).append(o),t.insertContent(s.innerHTML)}}})}}),t.on("PostProcess",function(t){if(t.save){var i=n(t.content);if(i.length){var a=n('<div class="rich-textarea-inserted" style="display: none;"></div>');n("body").append(a),a.append(i),a.find("p > img, p > iframe").each(function(t,i){var a=n(i).parent();if(a.contents().length>1){var s=n("<div>"+a.html()+"</div>");a.after(s),a.remove();var o=0,r=s.contents();r.each(function(e,t){"IMG"===t.nodeName||"IFRAME"===t.nodeName?(t.group=++o,o++):t.group=o}),e.each(e.uniq(e.pluck(r,"group"),!0),function(e){r.filter(function(t,i){return i.group===e}).wrapAll("<p/>")}),s.contents().first().unwrap()}}),a.find("img").addClass("zoomable rounded-image-wrapper");var s=n("<div>").append(a.html()).html();a.remove(),t.content=s}}})},loadPlaceholderPlugin:function(){a.a.PluginManager.add("placeholder",function(e){e.on("init",function(){var t=function(){var t=e.getElement().getAttribute("placeholder")||e.settings.placeholder,i=e.settings.placeholder_attrs||{style:{position:"absolute",top:"5px",left:0,color:"#9b9b9b","font-weight":"normal","font-size":"13px","padding-left":"8px","padding-top":"8px",width:"98%",overflow:"hidden","white-space":"pre-wrap"}},n=e.getContentAreaContainer();this.el=a.a.DOM.add(n,e.settings.placeholder_tag||"label",i,t)};t.prototype.hide=function(){a.a.DOM.setStyle(this.el,"display","none")},t.prototype.show=function(){a.a.DOM.setStyle(this.el,"display","")};var i=new t;function n(){e.settings.readonly||i.hide(),e.execCommand("mceFocus",!1)}function s(){""===e.getContent()?i.show():i.hide()}s(),a.a.DOM.bind(i.el,"click",n),e.on("focus",n),e.on("blur",s),e.on("change",s),e.on("setContent",s),e.on("keydown",function(){i.hide()})})})}});t.default=l}.call(this,i(10),i(9))},512:function(e,t,i){"use strict";(function(e){var n=i(21),a=i(527),s=i.n(a),o=n.a.extend({preventCloseOnSubmit:!1,templateFunc:e.template(s.a),templateData:function(){return this.options},events:function(){return e.extend(n.a.prototype.events.call(this),{"click .btn-action-cancel":"onClickCancel","click .btn-action-submit":"onClickSubmit"})},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e.extend({title:"Are you sure?",submitBtnVal:"Submit",cancelBtnVal:"Cancel",includeActions:!0,padding:!0,width:400},t),n.a.prototype.initialize.apply(this,arguments)},render:function(){n.a.prototype.render.apply(this,arguments),this.$el.addClass("action-popup-view"),!1===this.options.padding&&this.$(".popup-content").addClass("no-padding"),this.$el.width(this.options.width)},onClickCancel:function(){this.preventClose=!1,this.trigger("onPopupDidCancelEvent")},onClickSubmit:function(){this.trigger("onPopupDidSubmitEvent"),this.trigger("onConfirmationDidConfirmEvent"),!1===this.preventCloseOnSubmit&&this.closePopup()},disableBtnWithLabel:function(e){var t=this.$(".btn-action-submit");t.addClass("disabled").attr("disabled","disabled"),e&&t.val(e)}});t.a=o}).call(this,i(10))},527:function(e,t){e.exports='<% if (typeof title !== \'undefined\' && title != \'\') { %>\n    <h5 class="popup-title clear"><%= title %> <a href="javascript:;" class="btn-close icon-x"></a></h5>\n<% } %>\n<div class="popup-content">\n<% if (typeof content !== \'undefined\' && content != window.content) { %>\n    <%= content %>\n<% } %>\n</div>\n<% if (typeof includeActions !== \'undefined\' && includeActions !== false && includeActions !== \'\') { %>\n    <div class="popup-actions clear">\n        <input type="submit" class="btn-action-submit button left" value="<%= submitBtnVal %>"></input>\n        <a href="javascript:;" class="btn-action-cancel button alt-charcoal-ghost left"><%= cancelBtnVal %></a>\n    </div>\n<% } %>\n'},530:function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var n,a,s,o,r,c=1,l={},d=!1,u=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){s.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(a=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(h,0,e)}:(o="setImmediate$"+Math.random()+"$",r=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(t){e.postMessage(o+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var a={callback:e,args:t};return l[c]=a,n(c),c++},p.clearImmediate=m}function m(e){delete l[e]}function h(e){if(d)setTimeout(h,0,e);else{var t=l[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{m(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(37),i(64))},544:function(e,t,i){"use strict";(function(e){var n=i(563),a=i.n(n),s=i(512),o={initBasicFineUploader:function(t){if(!t)return!1;new a.a.FineUploaderBasic({uploaderType:"basic",button:t.button,multiple:!1,request:{endpoint:"/upload",inputName:t.inputName,forceMultipart:!0,paramsInBody:!0,params:{type:t.request.params.type,data:t.request.params.data,YII_CSRF_TOKEN:e.cookie("YII_CSRF_TOKEN")}},validation:{allowedExtensions:["jpg","jpeg","png","gif"],acceptFiles:"image/*",sizeLimit:8388608},callbacks:{onComplete:t.callbacks.onComplete,onError:function(e,t,i){new s.a({title:"Unable to Upload Image",content:"<p>"+i+"</p>",includeActions:!1}).openPopup()}}})}};t.a=o}).call(this,i(9))},557:function(e,t,i){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(530),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(37))},600:function(e,t,i){"use strict";var n=i(580),a=i.n(n);i(682),i(667),i(668);t.a=a.a},901:function(e,t,i){"use strict";(function(e,n){var a=i(8),s=i(902),o=a.a.extend({tinymceEditor:null,initialize:function(t){if(a.a.prototype.initialize.apply(this,arguments),e.extend(this,e.pick(t,["tinymceEditor"])),e.bindAll(this,"onEmbedMediaButtonClick"),!this.tinymceEditor)throw new Error("This view requires a tinymceEditor");this.setup()},setup:function(){this.tinymceEditor.addButton("embed-media-button",{title:"Add Media",classes:"editor-add-media",text:"+ Add Media",onclick:this.onEmbedMediaButtonClick})},onEmbedMediaButtonClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=new s.a({embedType:t});this.listenTo(i,"submit:embedCode",this.onEmbedMediaSubmit),this.listenTo(i,"submit:image",this.onImageSubmit)},onEmbedMediaSubmit:function(e){var t=n("<div></div>");t.append(e);var i=t.html();this.tinymceEditor.insertContent(i),this.tinymceEditor.fire("Focus")},onImageSubmit:function(e){var t=n("<img>");t.attr("src",e);var i=n("<p></p>");i.append(t),this.tinymceEditor.insertContent(i.html()),this.tinymceEditor.fire("Focus")}});t.a=o}).call(this,i(10),i(9))},902:function(e,t,i){"use strict";(function(e,n){i(186);var a=i(21),s=i(544),o=i(13),r=i(903),c=i.n(r),l=a.a.extend({className:"embed-media-popup",template:c.a,embedSelection:"",events:function(){return e.extend(a.a.prototype.events.call(this),{"click .btn-submit":"onSubmit","click .js-embed-option":"onSelection"})},initialize:function(t){e.extend(this,e.pick(t,["embedType"])),a.a.prototype.initialize.apply(this,arguments)},afterRender:function(){var e=this;this.$textarea=this.$(".js-embed-textarea"),this.$errorMessage=this.$(".js-embed-error-message"),s.a.initBasicFineUploader({button:this.$(".js-upload-image").get(0),inputName:"Discussion[embedded_image]",request:{params:{type:"Discussion"}},callbacks:{onComplete:function(t,i,n){e.trigger("submit:image",n.fileLocations),e.closePopup()}}}),this.embedType&&this.showSection(this.embedType.toLowerCase()),a.a.prototype.afterRender.apply(this,arguments)},submitEmbedlyRequest:function(e){var t=this;o.a.ajaxRequest("https://api.embedly.com/1/oembed",{data:{url:e,frame:!0,native:!0,key:SS.embedly.apiKey},type:"GET",success:function(e){var i=e.html;i||(i=t.getCustomEmbed(e)),i?(t.trigger("submit:embedCode",i),t.closePopup()):t.showErrorMessage("Sorry! We don\u2019t currently support this content!")},error:function(e){t.handleError(e)}})},submitSkillshareRequest:function(e,t){var i,n=this;"class"===t?i="embedClass":"project"===t&&(i="embedProject"),o.a.ajaxRequest("".concat(window.location.protocol,"//").concat(window.location.host,"/embed/").concat(i),{data:{url:e},type:"GET",success:function(e){var t=e.html;t?(n.trigger("submit:embedCode",t),n.closePopup()):n.showErrorMessage("Sorry! We don\u2019t currently support this content!")},error:function(e){n.handleError(e)}})},onSubmit:function(){var e=this.$textarea.val().trim(),t=this.embedSelection.charAt(0).toUpperCase()+this.embedSelection.slice(1);switch(SS.EventTracker.track("Submitted "+t+" Embed Url"),this.embedSelection){case"class":case"project":this.submitSkillshareRequest(e,this.embedSelection);break;case"link":this.submitEmbedlyRequest(e)}},onSelection:function(e){this.showSection(e.currentTarget.dataset.type)},showSection:function(e){var t=this.$(".js-embed-input");this.$(".js-embed-description").html({class:"Insert Skillshare class link",project:"Insert your project link",link:"Insert a URL (YouTube, Instagram, Medium, etc.)"}[e]),this.$(".js-embed-option").removeClass("active"),this.$(".js-embed-option[data-type=".concat(e,"]")).addClass("active"),this.$errorMessage.hide(),this.embedSelection!==e&&""!==this.embedSelection||t.toggleClass("hidden"),this.embedSelection=e},handleError:function(e){var t={400:"Hm...this url doesn't seem properly formatted. Double check and try again.",404:"Hm...this url doesn't seem to exist. Double check and try again.",503:"Uh-oh! Our embed service is down! Please contact us immediately: support@skillshare.com"}[JSON.parse(e.responseText).error_code]||"Sorry! We're having trouble processing this url. Please try again or contact us: support@skillshare.com";this.showErrorMessage(t)},showErrorMessage:function(e){var t=this;this.$errorMessage.html(e),this.$errorMessage.show(),this.$textarea.one("focus",function(){t.$errorMessage.hide()})},getCustomEmbed:function(e){if(e.url&&"photo"===e.type){var t=n("<img/>");return t.attr("src",e.url),t}}});t.a=l}).call(this,i(10),i(9))},903:function(e,t){e.exports='<a href="javascript:;" class="btn-close ss-icon-close"></a>\n<h4 class="popup-title">Add Media</h4>\n<div class="embed-options">\n    <div class="embed-options-type ss-icon-new-class js-embed-option" data-type="class">Skillshare<br>Class</div>\n    <div class="embed-options-type ss-icon-categories-design js-embed-option" data-type="project">Skillshare<br>Project</div>\n    <div class="embed-options-type ss-icon-link js-embed-option" data-type="link">Embed<br>Link</div>\n    <div class="embed-options-type ss-icon-pictures js-upload-image" data-type="image">Upload<br>Image</div>\n</div>\n<div class="embed-input js-embed-input hidden">\n    <p class="popup-description js-embed-description"></p>\n    <fieldset>\n        <textarea class="embed-textarea js-embed-textarea"></textarea>\n        <p class="error-message js-embed-error-message"></p>\n        <p class="content-warning-message">Promotional or repetitive posts may be removed by Skillshare.\n            <a target="_blank" href="https://help.skillshare.com/hc/en-us/articles/115007272888-Groups-Guidelines">Questions?</a>\n        </p>\n    </fieldset>\n    <a href="javascript:;" class="btn primary small btn-submit">Submit</a>\n</div>\n'}}]);
//# sourceMappingURL=115.8a7c3fc459d2fe514eeb.build.min.js.map